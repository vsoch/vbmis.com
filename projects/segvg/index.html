
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-touch-fullscreen" content="yes"/>
  <meta name="msapplication-tap-highlight" content="no"/>
  <link rel="stylesheet" href="assets/css/style.css"/>
  <script src="assets/js/jquery.js"></script>
  <script src="assets/js/paper.js"></script>
  <script src="assets/js/codemirror.js"></script>
  <script src="assets/js/scripts.js"></script>
  <title>Segvg: Segmentation to SVG</title>
</head>
  <body class="fullscreen">
<article><div class="paperscript">
<div class="buttons">
<div class="button run">Source</div>
<div class="explain">

</div>
</div>
<script type="text/paperscript" canvas="canvas-1">
var values = {
	paths: 50,
	minPoints: 5,
	maxPoints: 15,
	minRadius: 30,
	maxRadius: 90
};

var hitOptions = {
	segments: true,
	stroke: true,
	fill: true,
	tolerance: 5
};


var segments = [{'points': [[22, 26], [23, 25], [25, 25], [26, 26], [27, 26], [29, 28], [29, 29], [30, 30], [30, 34], [27, 37], [23, 37], [21, 35], [21, 29], [20, 28], [20, 27], [21, 26]]}, {'points': [[28, 29], [29, 28], [30, 28], [31, 29], [31, 42], [29, 44], [29, 45], [28, 46], [26, 46], [25, 47], [21, 47], [18, 44], [18, 39], [17, 38], [17, 37], [18, 36], [18, 34], [19, 33], [19, 31], [20, 30], [22, 30], [23, 29], [24, 30], [25, 29], [26, 29], [27, 30], [27, 31], [28, 32], [29, 32], [29, 31], [28, 30]]}, {'points': [[36, 10], [37, 9], [38, 9], [40, 11], [40, 12], [41, 13], [41, 14], [43, 16], [43, 20], [41, 22], [41, 23], [39, 25], [38, 25], [37, 24], [32, 24], [31, 25], [28, 25], [26, 23], [26, 19], [27, 18], [29, 18], [29, 17], [30, 16], [30, 12], [31, 11], [34, 11], [35, 10]]}, {'points': [[15, 11], [16, 10], [18, 10], [21, 13], [21, 16], [22, 17], [22, 19], [21, 20], [21, 23], [22, 24], [21, 25], [18, 25], [17, 26], [16, 26], [15, 27], [15, 28], [14, 29], [13, 29], [12, 30], [10, 28], [10, 26], [9, 25], [10, 24], [10, 17], [15, 12]]}, {'points': [[32, 34], [36, 34], [37, 35], [37, 40], [35, 42], [35, 44], [33, 46], [33, 48], [31, 50], [28, 50], [26, 52], [25, 52], [24, 51], [24, 49], [23, 48], [24, 47], [24, 46], [25, 45], [26, 45], [26, 43], [27, 42], [26, 42], [25, 41], [26, 40], [27, 40], [27, 39], [28, 38], [28, 37], [29, 36], [30, 36]]}, {'points': [[35, 12], [36, 11], [37, 11], [39, 13], [39, 18], [37, 20], [39, 22], [39, 24], [37, 26], [37, 28], [36, 29], [33, 29], [32, 28], [32, 27], [31, 28], [30, 27], [30, 25], [29, 25], [28, 24], [27, 24], [26, 25], [25, 25], [24, 26], [21, 23], [21, 22], [22, 21], [22, 19], [23, 18], [24, 19], [24, 18], [25, 17], [26, 17], [28, 15], [28, 13], [29, 12], [32, 12], [33, 13], [34, 12]]}, {'points': [[34, 40], [36, 40], [37, 41], [38, 40], [41, 40], [42, 41], [43, 40], [45, 42], [45, 43], [43, 45], [43, 47], [42, 48], [41, 48], [40, 49], [39, 49], [39, 53], [38, 54], [37, 54], [36, 55], [34, 55], [34, 56], [33, 57], [30, 57], [29, 56], [29, 55], [30, 54], [30, 52], [29, 52], [28, 51], [29, 50], [30, 50], [30, 46], [31, 45], [31, 44], [32, 43], [32, 42]]}, {'points': [[20, 15], [21, 14], [23, 16], [24, 16], [25, 17], [25, 20], [24, 21], [24, 22], [26, 24], [26, 26], [25, 27], [23, 27], [21, 29], [21, 30], [20, 31], [20, 34], [21, 35], [21, 38], [20, 39], [20, 41], [19, 42], [19, 44], [18, 45], [15, 45], [15, 46], [14, 47], [13, 46], [12, 47], [11, 47], [10, 46], [10, 39], [11, 38], [12, 38], [12, 35], [14, 33], [14, 31], [15, 30], [16, 30], [16, 29], [15, 29], [14, 28], [14, 27], [15, 26], [16, 26], [16, 22], [17, 21], [18, 21], [18, 17], [19, 16], [20, 16], [21, 17], [21, 18], [21, 17], [20, 16]]}, {'points': [[37, 31], [38, 30], [44, 30], [46, 32], [47, 32], [48, 33], [47, 34], [47, 38], [45, 40], [45, 42], [44, 43], [43, 43], [42, 44], [41, 44], [40, 45], [37, 42], [36, 42], [35, 41], [35, 40], [37, 38], [38, 38], [38, 37], [37, 36]]}, {'points': [[20, 17], [21, 16], [26, 16], [28, 18], [28, 19], [29, 20], [28, 21], [28, 23], [25, 26], [25, 29], [24, 30], [23, 30], [23, 31], [22, 32], [22, 33], [21, 34], [21, 36], [18, 39], [17, 38], [17, 37], [16, 38], [15, 37], [15, 34], [14, 33], [15, 32], [15, 30], [16, 29], [16, 27], [18, 25], [18, 24], [19, 23], [20, 23]]}, {'points': [[39, 35], [40, 34], [41, 35], [41, 36], [42, 36], [45, 39], [45, 38], [46, 37], [47, 38], [47, 42], [46, 43], [46, 44], [45, 45], [45, 46], [44, 47], [44, 48], [43, 49], [43, 50], [41, 52], [41, 53], [37, 57], [36, 57], [34, 59], [33, 58], [32, 58], [31, 57], [31, 56], [32, 55], [32, 50], [31, 49], [31, 46], [35, 42], [36, 43], [36, 45], [38, 45], [38, 43], [37, 42], [37, 41], [39, 39]]}, {'points': [[30, 20], [31, 19], [33, 19], [34, 20], [36, 20], [38, 22], [39, 22], [39, 21], [41, 19], [42, 19], [43, 20], [43, 27], [42, 28], [41, 28], [41, 29], [40, 30], [39, 30], [37, 32], [35, 32], [34, 33], [31, 33], [30, 32], [28, 32], [27, 31], [27, 30], [26, 29], [26, 26], [27, 25], [28, 25], [29, 24], [30, 24]]}, {'points': [[29, 23], [33, 27], [33, 29], [32, 30], [33, 31], [33, 32], [31, 34], [31, 35], [30, 36], [30, 40], [31, 41], [29, 43], [29, 45], [28, 46], [27, 46], [27, 48], [26, 49], [25, 49], [24, 50], [22, 50], [21, 51], [20, 51], [19, 52], [17, 52], [16, 51], [16, 50], [17, 49], [17, 47], [18, 46], [17, 46], [16, 45], [16, 44], [15, 43], [15, 41], [16, 40], [16, 39], [17, 38], [18, 38], [18, 34], [20, 32], [21, 32], [22, 33], [24, 33], [23, 32], [24, 31], [25, 31], [25, 30], [27, 28], [27, 25]]}, {'points': [[34, 27], [37, 27], [38, 28], [38, 30], [39, 31], [39, 32], [41, 34], [41, 35], [40, 36], [40, 38], [36, 42], [35, 41], [34, 42], [30, 42], [29, 43], [28, 43], [27, 42], [26, 42], [24, 40], [24, 35], [30, 29], [32, 29]]}, {'points': [[18, 38], [19, 37], [22, 37], [23, 38], [22, 39], [21, 39], [21, 40], [22, 40], [23, 41], [23, 42], [21, 44], [23, 44], [24, 43], [25, 43], [27, 45], [26, 46], [26, 50], [25, 51], [25, 53], [24, 54], [23, 54], [23, 56], [24, 57], [24, 60], [22, 62], [21, 62], [20, 61], [17, 61], [16, 60], [15, 60], [13, 58], [13, 57], [14, 56], [14, 47], [12, 45], [13, 44], [13, 43], [16, 40], [16, 39], [17, 38]]}, {'points': [[38, 9], [39, 10], [40, 10], [41, 11], [41, 14], [42, 15], [42, 19], [43, 20], [43, 24], [42, 25], [41, 25], [41, 27], [40, 28], [39, 28], [39, 29], [36, 32], [36, 34], [35, 35], [35, 36], [33, 38], [32, 37], [32, 36], [31, 35], [31, 31], [30, 30], [30, 25], [32, 23], [33, 23], [34, 22], [34, 21], [35, 20], [33, 20], [32, 21], [31, 20], [31, 18], [32, 17], [32, 16], [33, 15], [34, 16], [34, 17], [35, 17], [35, 16], [34, 15], [36, 13], [35, 12]]}, {'points': [[18, 18], [19, 19], [20, 19], [21, 20], [21, 21], [22, 22], [22, 23], [20, 25], [20, 26], [19, 27], [19, 28], [20, 29], [21, 29], [22, 30], [22, 33], [21, 34], [22, 35], [21, 36], [21, 37], [19, 39], [19, 41], [18, 42], [18, 43], [16, 45], [13, 45], [12, 46], [11, 46], [10, 45], [8, 45], [7, 44], [7, 43], [6, 42], [6, 37], [7, 36], [6, 36], [5, 35], [6, 34], [6, 33], [7, 32], [8, 32], [8, 31], [9, 30], [10, 30], [10, 29], [12, 27], [12, 22], [14, 20], [16, 20]]}, {'points': [[18, 36], [19, 37], [19, 38], [20, 38], [21, 39], [21, 40], [22, 41], [22, 42], [23, 43], [23, 47], [25, 49], [24, 50], [24, 52], [23, 53], [22, 53], [18, 57], [17, 56], [17, 57], [18, 58], [16, 60], [15, 60], [12, 57], [12, 52], [11, 51], [11, 48], [12, 47], [12, 41], [13, 40], [14, 40]]}, {'points': [[33, 39], [34, 38], [36, 38], [37, 39], [39, 39], [41, 41], [41, 44], [39, 46], [38, 46], [37, 47], [37, 54], [34, 57], [33, 57], [33, 58], [32, 59], [31, 58], [30, 59], [27, 59], [26, 60], [23, 60], [22, 59], [22, 55], [21, 55], [20, 54], [20, 45], [21, 44], [31, 44], [31, 43], [32, 42], [34, 42], [33, 41]]}, {'points': [[20, 5], [21, 4], [22, 4], [23, 5], [24, 5], [25, 4], [28, 7], [28, 8], [30, 10], [30, 11], [33, 11], [34, 12], [29, 17], [28, 17], [28, 18], [29, 19], [29, 20], [28, 21], [26, 21], [25, 20], [25, 22], [24, 23], [23, 23], [21, 25], [20, 25], [18, 27], [15, 27], [14, 26], [14, 17], [15, 16], [15, 15], [16, 14], [16, 13], [17, 12], [18, 12], [18, 11], [17, 10], [17, 9], [18, 8], [18, 6], [19, 5]]}, {'points': [[30, 15], [31, 14], [32, 15], [32, 20], [33, 21], [33, 22], [32, 23], [32, 27], [31, 28], [30, 28], [29, 29], [29, 32], [27, 34], [27, 36], [26, 37], [25, 37], [25, 38], [24, 39], [24, 40], [23, 41], [23, 42], [21, 44], [19, 44], [18, 43], [16, 43], [15, 42], [16, 41], [16, 39], [17, 38], [17, 37], [18, 36], [18, 33], [19, 32], [19, 31], [21, 29], [21, 28], [22, 27], [22, 24], [24, 22], [25, 22], [25, 20], [26, 19], [26, 17], [27, 16], [28, 16], [29, 15]]}, {'points': [[31, 3], [33, 5], [34, 5], [35, 6], [36, 6], [38, 8], [39, 8], [41, 10], [40, 11], [39, 11], [39, 12], [38, 13], [38, 15], [36, 17], [35, 17], [34, 18], [33, 18], [32, 19], [31, 19], [29, 21], [27, 21], [25, 19], [25, 18], [26, 17], [26, 15], [25, 14], [25, 13], [23, 11], [23, 9], [24, 8], [25, 9], [26, 8], [26, 6], [27, 5], [29, 5]]}, {'points': [[30, 39], [31, 38], [32, 38], [33, 39], [33, 46], [34, 47], [34, 51], [33, 52], [32, 52], [34, 52], [36, 54], [36, 55], [35, 56], [36, 57], [34, 59], [33, 59], [32, 60], [31, 60], [30, 61], [28, 61], [27, 62], [19, 62], [18, 61], [17, 61], [16, 60], [16, 53], [17, 52], [18, 53], [19, 52], [19, 51], [23, 47], [24, 48], [25, 47], [26, 48], [26, 46], [28, 44], [28, 43], [29, 42], [30, 42], [30, 41], [31, 40]]}, {'points': [[24, 6], [25, 5], [28, 8], [28, 9], [29, 10], [29, 14], [30, 15], [29, 16], [29, 17], [28, 18], [28, 19], [27, 20], [27, 21], [26, 22], [24, 22], [22, 24], [19, 24], [18, 23], [18, 21], [17, 21], [16, 20], [16, 8], [17, 7], [18, 7], [19, 6], [21, 6], [22, 7], [23, 6]]}, {'points': [[34, 30], [35, 29], [38, 29], [39, 30], [40, 30], [41, 31], [41, 35], [42, 35], [43, 36], [43, 38], [44, 39], [44, 42], [42, 44], [42, 45], [41, 46], [41, 48], [40, 49], [38, 49], [37, 48], [34, 51], [33, 51], [32, 50], [32, 41], [31, 40], [31, 33], [33, 31], [34, 32]]}, {'points': [[40, 16], [41, 15], [43, 15], [44, 16], [45, 16], [46, 17], [46, 18], [47, 18], [48, 19], [47, 20], [48, 20], [49, 21], [49, 26], [48, 27], [48, 31], [47, 32], [49, 34], [48, 35], [47, 35], [47, 36], [46, 37], [45, 37], [44, 36], [44, 35], [42, 35], [41, 34], [40, 34], [38, 36], [35, 36], [33, 34], [35, 32], [35, 31], [36, 30], [36, 29], [35, 28], [36, 27], [36, 25], [37, 24], [38, 24], [39, 23], [39, 21], [40, 20], [39, 19], [39, 18], [40, 17]]}, {'points': [[19, 2], [20, 1], [26, 1], [27, 2], [30, 2], [34, 6], [33, 7], [32, 7], [30, 9], [29, 9], [28, 10], [32, 10], [33, 11], [32, 12], [32, 13], [31, 14], [31, 16], [29, 18], [28, 17], [28, 19], [27, 20], [27, 21], [26, 22], [24, 22], [23, 23], [22, 23], [21, 24], [20, 24], [19, 25], [18, 24], [17, 25], [16, 24], [16, 23], [14, 23], [11, 20], [11, 19], [12, 18], [12, 15], [13, 14], [15, 14], [15, 13], [16, 12], [15, 11], [15, 9], [14, 8], [14, 6], [16, 4], [16, 3], [17, 2]]}, {'points': [[36, 9], [37, 8], [39, 8], [41, 10], [42, 10], [45, 13], [45, 14], [46, 14], [47, 15], [47, 17], [49, 19], [49, 22], [50, 23], [50, 24], [48, 26], [47, 25], [46, 25], [45, 26], [44, 25], [44, 24], [44, 25], [43, 26], [42, 25], [42, 23], [42, 24], [41, 25], [41, 27], [40, 28], [40, 29], [39, 30], [37, 30], [37, 31], [36, 32], [34, 32], [33, 31], [33, 27], [34, 26], [34, 25], [32, 23], [32, 16], [31, 15], [32, 14], [32, 13], [33, 12], [34, 13], [34, 10], [35, 9]]}];
createPaths();

function createPaths() {
	var radiusDelta = values.maxRadius - values.minRadius;
	var pointsDelta = values.maxPoints - values.minPoints;
	for (var i = 0; i < segments.length; i++) {
		var radius = values.minRadius + Math.random() * radiusDelta;
                var path = createBlob(view.size * Point.random(), segments[i].points);
                console.log(view.size);
		var lightness = (Math.random() - 0.5) * 0.4 + 0.4;
		var hue = Math.random() * 360;
		path.fillColor = { hue: hue, saturation: 1, lightness: lightness };
		path.strokeColor = 'black';
	};
}

function createBlob(center, points) {
	var path = new Path();
	path.closed = true;
	for (var i = 0; i < points.length; i++) {
		var delta = new Point({x:(points[i][0])*10,y:(points[i][1])*10});
                console.log(delta);
		path.add(center + delta);
	}
	path.smooth();
	return path;
}

var segment, path;
var movePath = false;
function onMouseDown(event) {
	segment = path = null;
	var hitResult = project.hitTest(event.point, hitOptions);
	if (!hitResult)
		return;

	if (event.modifiers.shift) {
		if (hitResult.type == 'segment') {
			hitResult.segment.remove();
		};
		return;
	}

	if (hitResult) {
		path = hitResult.item;
		if (hitResult.type == 'segment') {
			segment = hitResult.segment;
		} else if (hitResult.type == 'stroke') {
			var location = hitResult.location;
			segment = path.insert(location.index + 1, event.point);
			path.smooth();
		}
	}
	movePath = hitResult.type == 'fill';
	if (movePath)
		project.activeLayer.addChild(hitResult.item);
}

function onMouseMove(event) {
	project.activeLayer.selected = false;
	if (event.item)
		event.item.selected = true;
}

function onMouseDrag(event) {
	if (segment) {
		segment.point += event.delta;
		path.smooth();
	} else if (path) {
		path.position += event.delta;
	}
}
</script>
<div class="canvas">
<canvas resize="true" id="canvas-1" style="background:black"></canvas>
</div>
</div>
</article>
  </body>
</html>
